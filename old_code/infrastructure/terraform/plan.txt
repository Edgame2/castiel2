[0m[1mdata.azurerm_client_config.current: Reading...[0m[0m
[0m[1mdata.azurerm_client_config.current: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MzAyN2IwZGMtYzk3NS00Yzc3LThjY2UtZDE0ZDNlMmExMjIxO3N1YnNjcmlwdGlvbklkPTA4ZjcyMjlhLTliZmUtNDhmYy1hODFhLTJkMjc5NzFkY2I0NTt0ZW5hbnRJZD03YjhhMWRjMC05MmI4LTQ1ZTQtYmE2Zi1lMmE3MWVjM2Y3M2E=][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m

Terraform will perform the following actions:

[1m  # azurerm_application_insights.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_application_insights" "main" {
      [32m+[0m[0m app_id                                = (known after apply)
      [32m+[0m[0m application_type                      = "Node.JS"
      [32m+[0m[0m connection_string                     = (sensitive value)
      [32m+[0m[0m daily_data_cap_in_gb                  = (known after apply)
      [32m+[0m[0m daily_data_cap_notifications_disabled = (known after apply)
      [32m+[0m[0m disable_ip_masking                    = false
      [32m+[0m[0m force_customer_storage_for_profiler   = false
      [32m+[0m[0m id                                    = (known after apply)
      [32m+[0m[0m instrumentation_key                   = (sensitive value)
      [32m+[0m[0m internet_ingestion_enabled            = true
      [32m+[0m[0m internet_query_enabled                = true
      [32m+[0m[0m local_authentication_disabled         = false
      [32m+[0m[0m location                              = "eastus"
      [32m+[0m[0m name                                  = "castiel-ai-dev"
      [32m+[0m[0m resource_group_name                   = "castiel-dev-rg"
      [32m+[0m[0m retention_in_days                     = 90
      [32m+[0m[0m sampling_percentage                   = 100
      [32m+[0m[0m tags                                  = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
    }

[1m  # azurerm_cosmosdb_account.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_cosmosdb_account" "main" {
      [32m+[0m[0m access_key_metadata_writes_enabled           = true
      [32m+[0m[0m analytical_storage_enabled                   = false
      [32m+[0m[0m automatic_failover_enabled                   = (known after apply)
      [32m+[0m[0m burst_capacity_enabled                       = false
      [32m+[0m[0m connection_strings                           = (sensitive value)
      [32m+[0m[0m create_mode                                  = (known after apply)
      [32m+[0m[0m default_identity_type                        = "FirstPartyIdentity"
      [32m+[0m[0m enable_automatic_failover                    = (known after apply)
      [32m+[0m[0m enable_free_tier                             = (known after apply)
      [32m+[0m[0m enable_multiple_write_locations              = (known after apply)
      [32m+[0m[0m endpoint                                     = (known after apply)
      [32m+[0m[0m free_tier_enabled                            = (known after apply)
      [32m+[0m[0m id                                           = (known after apply)
      [32m+[0m[0m ip_range_filter                              = "0.0.0.0"
      [32m+[0m[0m is_virtual_network_filter_enabled            = true
      [32m+[0m[0m kind                                         = "GlobalDocumentDB"
      [32m+[0m[0m local_authentication_disabled                = false
      [32m+[0m[0m location                                     = "eastus"
      [32m+[0m[0m minimal_tls_version                          = (known after apply)
      [32m+[0m[0m mongo_server_version                         = (known after apply)
      [32m+[0m[0m multiple_write_locations_enabled             = (known after apply)
      [32m+[0m[0m name                                         = (known after apply)
      [32m+[0m[0m network_acl_bypass_for_azure_services        = false
      [32m+[0m[0m offer_type                                   = "Standard"
      [32m+[0m[0m partition_merge_enabled                      = false
      [32m+[0m[0m primary_key                                  = (sensitive value)
      [32m+[0m[0m primary_mongodb_connection_string            = (sensitive value)
      [32m+[0m[0m primary_readonly_key                         = (sensitive value)
      [32m+[0m[0m primary_readonly_mongodb_connection_string   = (sensitive value)
      [32m+[0m[0m primary_readonly_sql_connection_string       = (sensitive value)
      [32m+[0m[0m primary_sql_connection_string                = (sensitive value)
      [32m+[0m[0m public_network_access_enabled                = true
      [32m+[0m[0m read_endpoints                               = (known after apply)
      [32m+[0m[0m resource_group_name                          = "castiel-dev-rg"
      [32m+[0m[0m secondary_key                                = (sensitive value)
      [32m+[0m[0m secondary_mongodb_connection_string          = (sensitive value)
      [32m+[0m[0m secondary_readonly_key                       = (sensitive value)
      [32m+[0m[0m secondary_readonly_mongodb_connection_string = (sensitive value)
      [32m+[0m[0m secondary_readonly_sql_connection_string     = (sensitive value)
      [32m+[0m[0m secondary_sql_connection_string              = (sensitive value)
      [32m+[0m[0m tags                                         = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m write_endpoints                              = (known after apply)

      [32m+[0m[0m analytical_storage (known after apply)

      [32m+[0m[0m backup {
          [32m+[0m[0m interval_in_minutes = 240
          [32m+[0m[0m retention_in_hours  = 720
          [32m+[0m[0m storage_redundancy  = (known after apply)
          [32m+[0m[0m tier                = (known after apply)
          [32m+[0m[0m type                = "Continuous"
        }

      [32m+[0m[0m capabilities {
          [32m+[0m[0m name = "EnableServerless"
        }

      [32m+[0m[0m capacity (known after apply)

      [32m+[0m[0m consistency_policy {
          [32m+[0m[0m consistency_level = "Session"
        }

      [32m+[0m[0m geo_location {
          [32m+[0m[0m failover_priority = 0
          [32m+[0m[0m id                = (known after apply)
          [32m+[0m[0m location          = "eastus"
          [32m+[0m[0m zone_redundant    = false
        }

      [32m+[0m[0m virtual_network_rule {
          [32m+[0m[0m id                                   = (known after apply)
          [32m+[0m[0m ignore_missing_vnet_service_endpoint = false
        }
    }

[1m  # azurerm_cosmosdb_sql_container.oauth2_clients[0m will be created
[0m  [32m+[0m[0m resource "azurerm_cosmosdb_sql_container" "oauth2_clients" {
      [32m+[0m[0m account_name        = (known after apply)
      [32m+[0m[0m database_name       = "castiel"
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m name                = "oauth2-clients"
      [32m+[0m[0m partition_key_kind  = "Hash"
      [32m+[0m[0m partition_key_path  = (known after apply)
      [32m+[0m[0m partition_key_paths = [
          [32m+[0m[0m "/tenantId",
        ]
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m throughput          = (known after apply)

      [32m+[0m[0m conflict_resolution_policy (known after apply)

      [32m+[0m[0m indexing_policy {
          [32m+[0m[0m indexing_mode = "consistent"

          [32m+[0m[0m excluded_path {
              [32m+[0m[0m path = "/\"_etag\"/?"
            }

          [32m+[0m[0m included_path {
              [32m+[0m[0m path = "/*"
            }
        }

      [32m+[0m[0m unique_key {
          [32m+[0m[0m paths = [
              [32m+[0m[0m "/clientId",
            ]
        }
    }

[1m  # azurerm_cosmosdb_sql_container.revisions[0m will be created
[0m  [32m+[0m[0m resource "azurerm_cosmosdb_sql_container" "revisions" {
      [32m+[0m[0m account_name        = (known after apply)
      [32m+[0m[0m database_name       = "castiel"
      [32m+[0m[0m default_ttl         = 7776000
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m name                = "revisions"
      [32m+[0m[0m partition_key_kind  = "Hash"
      [32m+[0m[0m partition_key_path  = (known after apply)
      [32m+[0m[0m partition_key_paths = [
          [32m+[0m[0m "/tenantId",
        ]
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m throughput          = (known after apply)

      [32m+[0m[0m conflict_resolution_policy (known after apply)

      [32m+[0m[0m indexing_policy {
          [32m+[0m[0m indexing_mode = "consistent"

          [32m+[0m[0m excluded_path {
              [32m+[0m[0m path = "/\"_etag\"/?"
            }

          [32m+[0m[0m included_path {
              [32m+[0m[0m path = "/*"
            }
        }
    }

[1m  # azurerm_cosmosdb_sql_container.shard_types[0m will be created
[0m  [32m+[0m[0m resource "azurerm_cosmosdb_sql_container" "shard_types" {
      [32m+[0m[0m account_name        = (known after apply)
      [32m+[0m[0m database_name       = "castiel"
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m name                = "shard-types"
      [32m+[0m[0m partition_key_kind  = "Hash"
      [32m+[0m[0m partition_key_path  = (known after apply)
      [32m+[0m[0m partition_key_paths = [
          [32m+[0m[0m "/tenantId",
        ]
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m throughput          = (known after apply)

      [32m+[0m[0m conflict_resolution_policy (known after apply)

      [32m+[0m[0m indexing_policy {
          [32m+[0m[0m indexing_mode = "consistent"

          [32m+[0m[0m excluded_path {
              [32m+[0m[0m path = "/\"_etag\"/?"
            }

          [32m+[0m[0m included_path {
              [32m+[0m[0m path = "/*"
            }
        }
    }

[1m  # azurerm_cosmosdb_sql_container.shards[0m will be created
[0m  [32m+[0m[0m resource "azurerm_cosmosdb_sql_container" "shards" {
      [32m+[0m[0m account_name           = (known after apply)
      [32m+[0m[0m analytical_storage_ttl = -1
      [32m+[0m[0m database_name          = "castiel"
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m name                   = "shards"
      [32m+[0m[0m partition_key_kind     = "Hash"
      [32m+[0m[0m partition_key_path     = (known after apply)
      [32m+[0m[0m partition_key_paths    = [
          [32m+[0m[0m "/tenantId",
        ]
      [32m+[0m[0m resource_group_name    = "castiel-dev-rg"
      [32m+[0m[0m throughput             = (known after apply)

      [32m+[0m[0m conflict_resolution_policy (known after apply)

      [32m+[0m[0m indexing_policy {
          [32m+[0m[0m indexing_mode = "consistent"

          [32m+[0m[0m excluded_path {
              [32m+[0m[0m path = "/unstructuredData/?"
            }
          [32m+[0m[0m excluded_path {
              [32m+[0m[0m path = "/vectors/?"
            }
          [32m+[0m[0m excluded_path {
              [32m+[0m[0m path = "/\"_etag\"/?"
            }

          [32m+[0m[0m included_path {
              [32m+[0m[0m path = "/*"
            }

          [32m+[0m[0m spatial_index {
              [32m+[0m[0m path  = "/vectors/?"
              [32m+[0m[0m types = (known after apply)
            }
        }
    }

[1m  # azurerm_cosmosdb_sql_container.sso_configs[0m will be created
[0m  [32m+[0m[0m resource "azurerm_cosmosdb_sql_container" "sso_configs" {
      [32m+[0m[0m account_name        = (known after apply)
      [32m+[0m[0m database_name       = "castiel"
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m name                = "sso-configs"
      [32m+[0m[0m partition_key_kind  = "Hash"
      [32m+[0m[0m partition_key_path  = (known after apply)
      [32m+[0m[0m partition_key_paths = [
          [32m+[0m[0m "/tenantId",
        ]
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m throughput          = (known after apply)

      [32m+[0m[0m conflict_resolution_policy (known after apply)

      [32m+[0m[0m indexing_policy {
          [32m+[0m[0m indexing_mode = "consistent"

          [32m+[0m[0m excluded_path {
              [32m+[0m[0m path = "/\"_etag\"/?"
            }

          [32m+[0m[0m included_path {
              [32m+[0m[0m path = "/*"
            }
        }
    }

[1m  # azurerm_cosmosdb_sql_container.users[0m will be created
[0m  [32m+[0m[0m resource "azurerm_cosmosdb_sql_container" "users" {
      [32m+[0m[0m account_name        = (known after apply)
      [32m+[0m[0m database_name       = "castiel"
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m name                = "users"
      [32m+[0m[0m partition_key_kind  = "Hash"
      [32m+[0m[0m partition_key_path  = (known after apply)
      [32m+[0m[0m partition_key_paths = [
          [32m+[0m[0m "/tenantId",
        ]
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m throughput          = (known after apply)

      [32m+[0m[0m conflict_resolution_policy (known after apply)

      [32m+[0m[0m indexing_policy {
          [32m+[0m[0m indexing_mode = "consistent"

          [32m+[0m[0m excluded_path {
              [32m+[0m[0m path = "/\"_etag\"/?"
            }

          [32m+[0m[0m included_path {
              [32m+[0m[0m path = "/*"
            }
        }

      [32m+[0m[0m unique_key {
          [32m+[0m[0m paths = [
              [32m+[0m[0m "/email",
              [32m+[0m[0m "/tenantId",
            ]
        }
    }

[1m  # azurerm_cosmosdb_sql_database.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_cosmosdb_sql_database" "main" {
      [32m+[0m[0m account_name        = (known after apply)
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m name                = "castiel"
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m throughput          = (known after apply)
    }

[1m  # azurerm_cosmosdb_sql_role_assignment.functions[0m will be created
[0m  [32m+[0m[0m resource "azurerm_cosmosdb_sql_role_assignment" "functions" {
      [32m+[0m[0m account_name        = (known after apply)
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m name                = (known after apply)
      [32m+[0m[0m principal_id        = (known after apply)
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m role_definition_id  = (known after apply)
      [32m+[0m[0m scope               = (known after apply)
    }

[1m  # azurerm_key_vault.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault" "main" {
      [32m+[0m[0m access_policy                 = (known after apply)
      [32m+[0m[0m id                            = (known after apply)
      [32m+[0m[0m location                      = "eastus"
      [32m+[0m[0m name                          = (known after apply)
      [32m+[0m[0m public_network_access_enabled = true
      [32m+[0m[0m purge_protection_enabled      = false
      [32m+[0m[0m resource_group_name           = "castiel-dev-rg"
      [32m+[0m[0m sku_name                      = "standard"
      [32m+[0m[0m soft_delete_retention_days    = 90
      [32m+[0m[0m tags                          = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m tenant_id                     = "7b8a1dc0-92b8-45e4-ba6f-e2a71ec3f73a"
      [32m+[0m[0m vault_uri                     = (known after apply)

      [32m+[0m[0m contact (known after apply)

      [32m+[0m[0m network_acls {
          [32m+[0m[0m bypass                     = "AzureServices"
          [32m+[0m[0m default_action             = "Deny"
          [32m+[0m[0m virtual_network_subnet_ids = (known after apply)
        }
    }

[1m  # azurerm_key_vault_access_policy.functions[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_access_policy" "functions" {
      [32m+[0m[0m id                 = (known after apply)
      [32m+[0m[0m key_vault_id       = (known after apply)
      [32m+[0m[0m object_id          = (known after apply)
      [32m+[0m[0m secret_permissions = [
          [32m+[0m[0m "Get",
          [32m+[0m[0m "List",
        ]
      [32m+[0m[0m tenant_id          = (known after apply)
    }

[1m  # azurerm_key_vault_access_policy.main_api[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_access_policy" "main_api" {
      [32m+[0m[0m id                 = (known after apply)
      [32m+[0m[0m key_vault_id       = (known after apply)
      [32m+[0m[0m object_id          = (known after apply)
      [32m+[0m[0m secret_permissions = [
          [32m+[0m[0m "Get",
          [32m+[0m[0m "List",
        ]
      [32m+[0m[0m tenant_id          = (known after apply)
    }

[1m  # azurerm_key_vault_access_policy.terraform[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_access_policy" "terraform" {
      [32m+[0m[0m certificate_permissions = [
          [32m+[0m[0m "Get",
          [32m+[0m[0m "List",
          [32m+[0m[0m "Create",
          [32m+[0m[0m "Update",
          [32m+[0m[0m "Delete",
        ]
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m object_id               = "3027b0dc-c975-4c77-8cce-d14d3e2a1221"
      [32m+[0m[0m secret_permissions      = [
          [32m+[0m[0m "Get",
          [32m+[0m[0m "List",
          [32m+[0m[0m "Set",
          [32m+[0m[0m "Delete",
          [32m+[0m[0m "Purge",
          [32m+[0m[0m "Recover",
        ]
      [32m+[0m[0m tenant_id               = "7b8a1dc0-92b8-45e4-ba6f-e2a71ec3f73a"
    }

[1m  # azurerm_key_vault_secret.app_insights_connection_string[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "app_insights_connection_string" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "APPLICATIONINSIGHTS-CONNECTION-STRING"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.cosmos_db_endpoint[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "cosmos_db_endpoint" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "COSMOS-DB-ENDPOINT"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.cosmos_db_key[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "cosmos_db_key" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "COSMOS-DB-KEY"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.github_client_id[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "github_client_id" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "GITHUB-CLIENT-ID"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.github_client_secret[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "github_client_secret" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "GITHUB-CLIENT-SECRET"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.google_client_id[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "google_client_id" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "GOOGLE-CLIENT-ID"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.google_client_secret[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "google_client_secret" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "GOOGLE-CLIENT-SECRET"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.jwt_secret[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "jwt_secret" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "JWT-SECRET"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.openai_api_key[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "openai_api_key" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "OPENAI-API-KEY"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.redis_connection_string[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "redis_connection_string" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "REDIS-CONNECTION-STRING"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_key_vault_secret.sendgrid_api_key[0m will be created
[0m  [32m+[0m[0m resource "azurerm_key_vault_secret" "sendgrid_api_key" {
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m key_vault_id            = (known after apply)
      [32m+[0m[0m name                    = "SENDGRID-API-KEY"
      [32m+[0m[0m resource_id             = (known after apply)
      [32m+[0m[0m resource_versionless_id = (known after apply)
      [32m+[0m[0m value                   = (sensitive value)
      [32m+[0m[0m version                 = (known after apply)
      [32m+[0m[0m versionless_id          = (known after apply)
    }

[1m  # azurerm_linux_function_app.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_linux_function_app" "main" {
      [32m+[0m[0m app_settings                                   = (known after apply)
      [32m+[0m[0m builtin_logging_enabled                        = true
      [32m+[0m[0m client_certificate_enabled                     = false
      [32m+[0m[0m client_certificate_mode                        = "Optional"
      [32m+[0m[0m content_share_force_disabled                   = false
      [32m+[0m[0m custom_domain_verification_id                  = (sensitive value)
      [32m+[0m[0m daily_memory_time_quota                        = 0
      [32m+[0m[0m default_hostname                               = (known after apply)
      [32m+[0m[0m enabled                                        = true
      [32m+[0m[0m ftp_publish_basic_authentication_enabled       = true
      [32m+[0m[0m functions_extension_version                    = "~4"
      [32m+[0m[0m hosting_environment_id                         = (known after apply)
      [32m+[0m[0m https_only                                     = false
      [32m+[0m[0m id                                             = (known after apply)
      [32m+[0m[0m key_vault_reference_identity_id                = (known after apply)
      [32m+[0m[0m kind                                           = (known after apply)
      [32m+[0m[0m location                                       = "eastus"
      [32m+[0m[0m name                                           = "castiel-functions-dev"
      [32m+[0m[0m outbound_ip_address_list                       = (known after apply)
      [32m+[0m[0m outbound_ip_addresses                          = (known after apply)
      [32m+[0m[0m possible_outbound_ip_address_list              = (known after apply)
      [32m+[0m[0m possible_outbound_ip_addresses                 = (known after apply)
      [32m+[0m[0m public_network_access_enabled                  = true
      [32m+[0m[0m resource_group_name                            = "castiel-dev-rg"
      [32m+[0m[0m service_plan_id                                = (known after apply)
      [32m+[0m[0m site_credential                                = (sensitive value)
      [32m+[0m[0m storage_account_access_key                     = (sensitive value)
      [32m+[0m[0m storage_account_name                           = (known after apply)
      [32m+[0m[0m storage_uses_managed_identity                  = false
      [32m+[0m[0m tags                                           = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m webdeploy_publish_basic_authentication_enabled = true
      [32m+[0m[0m zip_deploy_file                                = (known after apply)

      [32m+[0m[0m identity {
          [32m+[0m[0m principal_id = (known after apply)
          [32m+[0m[0m tenant_id    = (known after apply)
          [32m+[0m[0m type         = "SystemAssigned"
        }

      [32m+[0m[0m site_config {
          [32m+[0m[0m always_on                               = false
          [32m+[0m[0m app_scale_limit                         = (known after apply)
          [32m+[0m[0m application_insights_connection_string  = (sensitive value)
          [32m+[0m[0m application_insights_key                = (sensitive value)
          [32m+[0m[0m container_registry_use_managed_identity = false
          [32m+[0m[0m default_documents                       = (known after apply)
          [32m+[0m[0m detailed_error_logging_enabled          = (known after apply)
          [32m+[0m[0m elastic_instance_minimum                = (known after apply)
          [32m+[0m[0m ftps_state                              = "Disabled"
          [32m+[0m[0m health_check_eviction_time_in_min       = (known after apply)
          [32m+[0m[0m http2_enabled                           = false
          [32m+[0m[0m ip_restriction_default_action           = "Allow"
          [32m+[0m[0m linux_fx_version                        = (known after apply)
          [32m+[0m[0m load_balancing_mode                     = "LeastRequests"
          [32m+[0m[0m managed_pipeline_mode                   = "Integrated"
          [32m+[0m[0m minimum_tls_version                     = "1.2"
          [32m+[0m[0m pre_warmed_instance_count               = (known after apply)
          [32m+[0m[0m remote_debugging_enabled                = false
          [32m+[0m[0m remote_debugging_version                = (known after apply)
          [32m+[0m[0m scm_ip_restriction_default_action       = "Allow"
          [32m+[0m[0m scm_minimum_tls_version                 = "1.2"
          [32m+[0m[0m scm_type                                = (known after apply)
          [32m+[0m[0m scm_use_main_ip_restriction             = false
          [32m+[0m[0m use_32_bit_worker                       = false
          [32m+[0m[0m vnet_route_all_enabled                  = false
          [32m+[0m[0m websockets_enabled                      = false
          [32m+[0m[0m worker_count                            = (known after apply)

          [32m+[0m[0m application_stack {
              [32m+[0m[0m node_version                = "20"
              [32m+[0m[0m use_dotnet_isolated_runtime = false
            }

          [32m+[0m[0m cors {
              [32m+[0m[0m allowed_origins     = [
                  [32m+[0m[0m "*",
                ]
              [32m+[0m[0m support_credentials = true
            }
        }
    }

[1m  # azurerm_linux_web_app.main_api[0m will be created
[0m  [32m+[0m[0m resource "azurerm_linux_web_app" "main_api" {
      [32m+[0m[0m app_settings                                   = (known after apply)
      [32m+[0m[0m client_affinity_enabled                        = false
      [32m+[0m[0m client_certificate_enabled                     = false
      [32m+[0m[0m client_certificate_mode                        = "Required"
      [32m+[0m[0m custom_domain_verification_id                  = (sensitive value)
      [32m+[0m[0m default_hostname                               = (known after apply)
      [32m+[0m[0m enabled                                        = true
      [32m+[0m[0m ftp_publish_basic_authentication_enabled       = true
      [32m+[0m[0m hosting_environment_id                         = (known after apply)
      [32m+[0m[0m https_only                                     = true
      [32m+[0m[0m id                                             = (known after apply)
      [32m+[0m[0m key_vault_reference_identity_id                = (known after apply)
      [32m+[0m[0m kind                                           = (known after apply)
      [32m+[0m[0m location                                       = "eastus"
      [32m+[0m[0m name                                           = "castiel-api-dev"
      [32m+[0m[0m outbound_ip_address_list                       = (known after apply)
      [32m+[0m[0m outbound_ip_addresses                          = (known after apply)
      [32m+[0m[0m possible_outbound_ip_address_list              = (known after apply)
      [32m+[0m[0m possible_outbound_ip_addresses                 = (known after apply)
      [32m+[0m[0m public_network_access_enabled                  = true
      [32m+[0m[0m resource_group_name                            = "castiel-dev-rg"
      [32m+[0m[0m service_plan_id                                = (known after apply)
      [32m+[0m[0m site_credential                                = (sensitive value)
      [32m+[0m[0m tags                                           = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m webdeploy_publish_basic_authentication_enabled = true
      [32m+[0m[0m zip_deploy_file                                = (known after apply)

      [32m+[0m[0m identity {
          [32m+[0m[0m principal_id = (known after apply)
          [32m+[0m[0m tenant_id    = (known after apply)
          [32m+[0m[0m type         = "SystemAssigned"
        }

      [32m+[0m[0m logs {
          [32m+[0m[0m detailed_error_messages = false
          [32m+[0m[0m failed_request_tracing  = false

          [32m+[0m[0m application_logs {
              [32m+[0m[0m file_system_level = "Information"
            }

          [32m+[0m[0m http_logs {
              [32m+[0m[0m file_system {
                  [32m+[0m[0m retention_in_days = 7
                  [32m+[0m[0m retention_in_mb   = 35
                }
            }
        }

      [32m+[0m[0m site_config {
          [32m+[0m[0m always_on                               = false
          [32m+[0m[0m app_command_line                        = "node dist/index.js"
          [32m+[0m[0m container_registry_use_managed_identity = false
          [32m+[0m[0m default_documents                       = (known after apply)
          [32m+[0m[0m detailed_error_logging_enabled          = (known after apply)
          [32m+[0m[0m ftps_state                              = "Disabled"
          [32m+[0m[0m health_check_eviction_time_in_min       = (known after apply)
          [32m+[0m[0m health_check_path                       = "/health"
          [32m+[0m[0m http2_enabled                           = false
          [32m+[0m[0m ip_restriction_default_action           = "Allow"
          [32m+[0m[0m linux_fx_version                        = (known after apply)
          [32m+[0m[0m load_balancing_mode                     = "LeastRequests"
          [32m+[0m[0m local_mysql_enabled                     = false
          [32m+[0m[0m managed_pipeline_mode                   = "Integrated"
          [32m+[0m[0m minimum_tls_version                     = "1.2"
          [32m+[0m[0m remote_debugging_enabled                = false
          [32m+[0m[0m remote_debugging_version                = (known after apply)
          [32m+[0m[0m scm_ip_restriction_default_action       = "Allow"
          [32m+[0m[0m scm_minimum_tls_version                 = "1.2"
          [32m+[0m[0m scm_type                                = (known after apply)
          [32m+[0m[0m scm_use_main_ip_restriction             = false
          [32m+[0m[0m use_32_bit_worker                       = true
          [32m+[0m[0m vnet_route_all_enabled                  = false
          [32m+[0m[0m websockets_enabled                      = false
          [32m+[0m[0m worker_count                            = (known after apply)

          [32m+[0m[0m application_stack {
              [32m+[0m[0m docker_registry_password = (sensitive value)
              [32m+[0m[0m docker_registry_url      = (known after apply)
              [32m+[0m[0m docker_registry_username = (known after apply)
              [32m+[0m[0m node_version             = "20-lts"
            }
        }
    }

[1m  # azurerm_log_analytics_workspace.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_log_analytics_workspace" "main" {
      [32m+[0m[0m allow_resource_only_permissions = true
      [32m+[0m[0m daily_quota_gb                  = -1
      [32m+[0m[0m id                              = (known after apply)
      [32m+[0m[0m internet_ingestion_enabled      = true
      [32m+[0m[0m internet_query_enabled          = true
      [32m+[0m[0m local_authentication_disabled   = false
      [32m+[0m[0m location                        = "eastus"
      [32m+[0m[0m name                            = "castiel-law-dev"
      [32m+[0m[0m primary_shared_key              = (sensitive value)
      [32m+[0m[0m resource_group_name             = "castiel-dev-rg"
      [32m+[0m[0m retention_in_days               = 30
      [32m+[0m[0m secondary_shared_key            = (sensitive value)
      [32m+[0m[0m sku                             = "PerGB2018"
      [32m+[0m[0m tags                            = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m workspace_id                    = (known after apply)
    }

[1m  # azurerm_monitor_action_group.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_action_group" "main" {
      [32m+[0m[0m enabled             = true
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m location            = "global"
      [32m+[0m[0m name                = "castiel-action-group-dev"
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m short_name          = "castiel"
      [32m+[0m[0m tags                = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }

      [32m+[0m[0m email_receiver {
          [32m+[0m[0m email_address = "ops@castiel.com"
          [32m+[0m[0m name          = "ops-team"
        }
    }

[1m  # azurerm_monitor_diagnostic_setting.redis[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_diagnostic_setting" "redis" {
      [32m+[0m[0m id                             = (known after apply)
      [32m+[0m[0m log_analytics_destination_type = (known after apply)
      [32m+[0m[0m log_analytics_workspace_id     = (known after apply)
      [32m+[0m[0m name                           = "castiel-redis-dev-diagnostics"
      [32m+[0m[0m target_resource_id             = (known after apply)

      [32m+[0m[0m enabled_log {
          [32m+[0m[0m category       = "ConnectedClientList"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }

      [32m+[0m[0m log (known after apply)

      [32m+[0m[0m metric {
          [32m+[0m[0m category = "AllMetrics"
          [32m+[0m[0m enabled  = true
        }
    }

[1m  # azurerm_monitor_metric_alert.app_service_cpu[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "app_service_cpu" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert when App Service CPU usage exceeds 80%"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-cpu-alert-dev"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 2
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Average"
          [32m+[0m[0m metric_name            = "CpuPercentage"
          [32m+[0m[0m metric_namespace       = "Microsoft.Web/serverfarms"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 80
        }
    }

[1m  # azurerm_monitor_metric_alert.app_service_errors[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "app_service_errors" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert on high rate of 5xx errors"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT1M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-5xx-errors-alert-dev"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 1
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT5M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Total"
          [32m+[0m[0m metric_name            = "Http5xx"
          [32m+[0m[0m metric_namespace       = "Microsoft.Web/sites"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 10
        }
    }

[1m  # azurerm_monitor_metric_alert.app_service_memory[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "app_service_memory" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert when App Service memory usage exceeds 80%"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-memory-alert-dev"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 2
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Average"
          [32m+[0m[0m metric_name            = "MemoryPercentage"
          [32m+[0m[0m metric_namespace       = "Microsoft.Web/serverfarms"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 80
        }
    }

[1m  # azurerm_monitor_metric_alert.app_service_response_time[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "app_service_response_time" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert when API response time exceeds 2 seconds"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-response-time-alert-dev"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 3
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Average"
          [32m+[0m[0m metric_name            = "AverageResponseTime"
          [32m+[0m[0m metric_namespace       = "Microsoft.Web/sites"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 2000
        }
    }

[1m  # azurerm_monitor_metric_alert.cosmos_db_ru[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "cosmos_db_ru" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert when Cosmos DB RU usage is high"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-cosmos-ru-alert-dev"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 2
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Total"
          [32m+[0m[0m metric_name            = "TotalRequests"
          [32m+[0m[0m metric_namespace       = "Microsoft.DocumentDB/databaseAccounts"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 10000
        }
    }

[1m  # azurerm_monitor_metric_alert.cosmos_throttling[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "cosmos_throttling" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert when Cosmos DB requests are being throttled"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-cosmos-throttling-dev"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 1
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Total"
          [32m+[0m[0m metric_name            = "TotalRequestUnits"
          [32m+[0m[0m metric_namespace       = "Microsoft.DocumentDB/databaseAccounts"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 1000
        }
    }

[1m  # azurerm_monitor_metric_alert.high_memory[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "high_memory" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert when memory usage exceeds 90%"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-high-memory-dev"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 1
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Average"
          [32m+[0m[0m metric_name            = "MemoryPercentage"
          [32m+[0m[0m metric_namespace       = "Microsoft.Web/serverfarms"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 90
        }
    }

[1m  # azurerm_monitor_metric_alert.redis_cache_hit_rate[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "redis_cache_hit_rate" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert when cache hit rate drops below 60%"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-redis-dev-hit-rate-alert"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 3
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Average"
          [32m+[0m[0m metric_name            = "cachehitrate"
          [32m+[0m[0m metric_namespace       = "Microsoft.Cache/redis"
          [32m+[0m[0m operator               = "LessThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 60
        }
    }

[1m  # azurerm_monitor_metric_alert.redis_connections[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "redis_connections" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert on high Redis connection count"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-redis-dev-connections-alert"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 3
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Maximum"
          [32m+[0m[0m metric_name            = "connectedclients"
          [32m+[0m[0m metric_namespace       = "Microsoft.Cache/redis"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 1000
        }
    }

[1m  # azurerm_monitor_metric_alert.redis_memory[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "redis_memory" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert when Redis memory usage exceeds 85%"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-redis-dev-memory-alert"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 2
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Average"
          [32m+[0m[0m metric_name            = "usedmemorypercentage"
          [32m+[0m[0m metric_namespace       = "Microsoft.Cache/redis"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 85
        }
    }

[1m  # azurerm_monitor_metric_alert.service_bus_queue_depth[0m will be created
[0m  [32m+[0m[0m resource "azurerm_monitor_metric_alert" "service_bus_queue_depth" {
      [32m+[0m[0m auto_mitigate            = true
      [32m+[0m[0m description              = "Alert when Service Bus queue depth exceeds 1000 messages"
      [32m+[0m[0m enabled                  = true
      [32m+[0m[0m frequency                = "PT5M"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m name                     = "castiel-sb-queue-depth-dev"
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m scopes                   = (known after apply)
      [32m+[0m[0m severity                 = 2
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m target_resource_location = (known after apply)
      [32m+[0m[0m target_resource_type     = (known after apply)
      [32m+[0m[0m window_size              = "PT15M"

      [32m+[0m[0m action {
          [32m+[0m[0m action_group_id = (known after apply)
        }

      [32m+[0m[0m criteria {
          [32m+[0m[0m aggregation            = "Average"
          [32m+[0m[0m metric_name            = "ActiveMessages"
          [32m+[0m[0m metric_namespace       = "Microsoft.ServiceBus/namespaces"
          [32m+[0m[0m operator               = "GreaterThan"
          [32m+[0m[0m skip_metric_validation = false
          [32m+[0m[0m threshold              = 1000
        }
    }

[1m  # azurerm_network_security_group.app_services[0m will be created
[0m  [32m+[0m[0m resource "azurerm_network_security_group" "app_services" {
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m location            = "eastus"
      [32m+[0m[0m name                = "castiel-nsg-app-services-dev"
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m security_rule       = [
          [32m+[0m[0m {
              [32m+[0m[0m access                                     = "Allow"
              [32m+[0m[0m description                                = "Allow HTTPS outbound for Azure services"
              [32m+[0m[0m destination_address_prefix                 = "Internet"
              [32m+[0m[0m destination_address_prefixes               = []
              [32m+[0m[0m destination_application_security_group_ids = []
              [32m+[0m[0m destination_port_range                     = "443"
              [32m+[0m[0m destination_port_ranges                    = []
              [32m+[0m[0m direction                                  = "Outbound"
              [32m+[0m[0m name                                       = "AllowHTTPSOutbound"
              [32m+[0m[0m priority                                   = 1000
              [32m+[0m[0m protocol                                   = "Tcp"
              [32m+[0m[0m source_address_prefix                      = "VirtualNetwork"
              [32m+[0m[0m source_address_prefixes                    = []
              [32m+[0m[0m source_application_security_group_ids      = []
              [32m+[0m[0m source_port_range                          = "*"
              [32m+[0m[0m source_port_ranges                         = []
            },
          [32m+[0m[0m {
              [32m+[0m[0m access                                     = "Allow"
              [32m+[0m[0m description                                = "Allow outbound to Azure Storage"
              [32m+[0m[0m destination_address_prefix                 = "Storage"
              [32m+[0m[0m destination_address_prefixes               = []
              [32m+[0m[0m destination_application_security_group_ids = []
              [32m+[0m[0m destination_port_range                     = "443"
              [32m+[0m[0m destination_port_ranges                    = []
              [32m+[0m[0m direction                                  = "Outbound"
              [32m+[0m[0m name                                       = "AllowStorageOutbound"
              [32m+[0m[0m priority                                   = 1002
              [32m+[0m[0m protocol                                   = "Tcp"
              [32m+[0m[0m source_address_prefix                      = "VirtualNetwork"
              [32m+[0m[0m source_address_prefixes                    = []
              [32m+[0m[0m source_application_security_group_ids      = []
              [32m+[0m[0m source_port_range                          = "*"
              [32m+[0m[0m source_port_ranges                         = []
            },
          [32m+[0m[0m {
              [32m+[0m[0m access                                     = "Allow"
              [32m+[0m[0m description                                = "Allow outbound to Cosmos DB"
              [32m+[0m[0m destination_address_prefix                 = "AzureCosmosDB"
              [32m+[0m[0m destination_address_prefixes               = []
              [32m+[0m[0m destination_application_security_group_ids = []
              [32m+[0m[0m destination_port_range                     = "443"
              [32m+[0m[0m destination_port_ranges                    = []
              [32m+[0m[0m direction                                  = "Outbound"
              [32m+[0m[0m name                                       = "AllowCosmosDBOutbound"
              [32m+[0m[0m priority                                   = 1001
              [32m+[0m[0m protocol                                   = "Tcp"
              [32m+[0m[0m source_address_prefix                      = "VirtualNetwork"
              [32m+[0m[0m source_address_prefixes                    = []
              [32m+[0m[0m source_application_security_group_ids      = []
              [32m+[0m[0m source_port_range                          = "*"
              [32m+[0m[0m source_port_ranges                         = []
            },
          [32m+[0m[0m {
              [32m+[0m[0m access                                     = "Allow"
              [32m+[0m[0m description                                = "Allow outbound to Service Bus"
              [32m+[0m[0m destination_address_prefix                 = "ServiceBus"
              [32m+[0m[0m destination_address_prefixes               = []
              [32m+[0m[0m destination_application_security_group_ids = []
              [32m+[0m[0m destination_port_range                     = "5671,5672"
              [32m+[0m[0m destination_port_ranges                    = []
              [32m+[0m[0m direction                                  = "Outbound"
              [32m+[0m[0m name                                       = "AllowServiceBusOutbound"
              [32m+[0m[0m priority                                   = 1003
              [32m+[0m[0m protocol                                   = "Tcp"
              [32m+[0m[0m source_address_prefix                      = "VirtualNetwork"
              [32m+[0m[0m source_address_prefixes                    = []
              [32m+[0m[0m source_application_security_group_ids      = []
              [32m+[0m[0m source_port_range                          = "*"
              [32m+[0m[0m source_port_ranges                         = []
            },
          [32m+[0m[0m {
              [32m+[0m[0m access                                     = "Deny"
              [32m+[0m[0m description                                = "Deny all other outbound traffic"
              [32m+[0m[0m destination_address_prefix                 = "*"
              [32m+[0m[0m destination_address_prefixes               = []
              [32m+[0m[0m destination_application_security_group_ids = []
              [32m+[0m[0m destination_port_range                     = "*"
              [32m+[0m[0m destination_port_ranges                    = []
              [32m+[0m[0m direction                                  = "Outbound"
              [32m+[0m[0m name                                       = "DenyAllOutbound"
              [32m+[0m[0m priority                                   = 4000
              [32m+[0m[0m protocol                                   = "*"
              [32m+[0m[0m source_address_prefix                      = "*"
              [32m+[0m[0m source_address_prefixes                    = []
              [32m+[0m[0m source_application_security_group_ids      = []
              [32m+[0m[0m source_port_range                          = "*"
              [32m+[0m[0m source_port_ranges                         = []
            },
        ]
      [32m+[0m[0m tags                = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
    }

[1m  # azurerm_network_security_group.private_endpoints[0m will be created
[0m  [32m+[0m[0m resource "azurerm_network_security_group" "private_endpoints" {
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m location            = "eastus"
      [32m+[0m[0m name                = "castiel-nsg-private-endpoints-dev"
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m security_rule       = [
          [32m+[0m[0m {
              [32m+[0m[0m access                                     = "Allow"
              [32m+[0m[0m description                                = "Allow inbound from App Services subnet"
              [32m+[0m[0m destination_address_prefix                 = "*"
              [32m+[0m[0m destination_address_prefixes               = []
              [32m+[0m[0m destination_application_security_group_ids = []
              [32m+[0m[0m destination_port_range                     = "*"
              [32m+[0m[0m destination_port_ranges                    = []
              [32m+[0m[0m direction                                  = "Inbound"
              [32m+[0m[0m name                                       = "AllowInboundFromAppServices"
              [32m+[0m[0m priority                                   = 1000
              [32m+[0m[0m protocol                                   = "Tcp"
              [32m+[0m[0m source_address_prefix                      = "10.0.1.0/24"
              [32m+[0m[0m source_address_prefixes                    = []
              [32m+[0m[0m source_application_security_group_ids      = []
              [32m+[0m[0m source_port_range                          = "*"
              [32m+[0m[0m source_port_ranges                         = []
            },
          [32m+[0m[0m {
              [32m+[0m[0m access                                     = "Allow"
              [32m+[0m[0m description                                = "Allow outbound to Azure services"
              [32m+[0m[0m destination_address_prefix                 = "AzureCloud"
              [32m+[0m[0m destination_address_prefixes               = []
              [32m+[0m[0m destination_application_security_group_ids = []
              [32m+[0m[0m destination_port_range                     = "443"
              [32m+[0m[0m destination_port_ranges                    = []
              [32m+[0m[0m direction                                  = "Outbound"
              [32m+[0m[0m name                                       = "AllowOutboundToAzureServices"
              [32m+[0m[0m priority                                   = 1000
              [32m+[0m[0m protocol                                   = "Tcp"
              [32m+[0m[0m source_address_prefix                      = "VirtualNetwork"
              [32m+[0m[0m source_address_prefixes                    = []
              [32m+[0m[0m source_application_security_group_ids      = []
              [32m+[0m[0m source_port_range                          = "*"
              [32m+[0m[0m source_port_ranges                         = []
            },
        ]
      [32m+[0m[0m tags                = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
    }

[1m  # azurerm_network_security_group.redis[0m will be created
[0m  [32m+[0m[0m resource "azurerm_network_security_group" "redis" {
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m location            = "eastus"
      [32m+[0m[0m name                = "castiel-nsg-redis-dev"
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m security_rule       = [
          [32m+[0m[0m {
              [32m+[0m[0m access                                     = "Allow"
              [32m+[0m[0m description                                = "Allow Redis access from App Services subnet"
              [32m+[0m[0m destination_address_prefix                 = "*"
              [32m+[0m[0m destination_address_prefixes               = []
              [32m+[0m[0m destination_application_security_group_ids = []
              [32m+[0m[0m destination_port_range                     = "6380"
              [32m+[0m[0m destination_port_ranges                    = []
              [32m+[0m[0m direction                                  = "Inbound"
              [32m+[0m[0m name                                       = "AllowRedisInboundFromAppServices"
              [32m+[0m[0m priority                                   = 1000
              [32m+[0m[0m protocol                                   = "Tcp"
              [32m+[0m[0m source_address_prefix                      = "10.0.1.0/24"
              [32m+[0m[0m source_address_prefixes                    = []
              [32m+[0m[0m source_application_security_group_ids      = []
              [32m+[0m[0m source_port_range                          = "*"
              [32m+[0m[0m source_port_ranges                         = []
            },
          [32m+[0m[0m {
              [32m+[0m[0m access                                     = "Deny"
              [32m+[0m[0m description                                = "Deny all other inbound traffic"
              [32m+[0m[0m destination_address_prefix                 = "*"
              [32m+[0m[0m destination_address_prefixes               = []
              [32m+[0m[0m destination_application_security_group_ids = []
              [32m+[0m[0m destination_port_range                     = "*"
              [32m+[0m[0m destination_port_ranges                    = []
              [32m+[0m[0m direction                                  = "Inbound"
              [32m+[0m[0m name                                       = "DenyAllInbound"
              [32m+[0m[0m priority                                   = 4000
              [32m+[0m[0m protocol                                   = "*"
              [32m+[0m[0m source_address_prefix                      = "*"
              [32m+[0m[0m source_address_prefixes                    = []
              [32m+[0m[0m source_application_security_group_ids      = []
              [32m+[0m[0m source_port_range                          = "*"
              [32m+[0m[0m source_port_ranges                         = []
            },
        ]
      [32m+[0m[0m tags                = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
    }

[1m  # azurerm_private_dns_zone.cosmos[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_dns_zone" "cosmos" {
      [32m+[0m[0m id                                                    = (known after apply)
      [32m+[0m[0m max_number_of_record_sets                             = (known after apply)
      [32m+[0m[0m max_number_of_virtual_network_links                   = (known after apply)
      [32m+[0m[0m max_number_of_virtual_network_links_with_registration = (known after apply)
      [32m+[0m[0m name                                                  = "privatelink.documents.azure.com"
      [32m+[0m[0m number_of_record_sets                                 = (known after apply)
      [32m+[0m[0m resource_group_name                                   = "castiel-dev-rg"
      [32m+[0m[0m tags                                                  = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }

      [32m+[0m[0m soa_record (known after apply)
    }

[1m  # azurerm_private_dns_zone.key_vault[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_dns_zone" "key_vault" {
      [32m+[0m[0m id                                                    = (known after apply)
      [32m+[0m[0m max_number_of_record_sets                             = (known after apply)
      [32m+[0m[0m max_number_of_virtual_network_links                   = (known after apply)
      [32m+[0m[0m max_number_of_virtual_network_links_with_registration = (known after apply)
      [32m+[0m[0m name                                                  = "privatelink.vaultcore.azure.net"
      [32m+[0m[0m number_of_record_sets                                 = (known after apply)
      [32m+[0m[0m resource_group_name                                   = "castiel-dev-rg"
      [32m+[0m[0m tags                                                  = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }

      [32m+[0m[0m soa_record (known after apply)
    }

[1m  # azurerm_private_dns_zone.redis[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_dns_zone" "redis" {
      [32m+[0m[0m id                                                    = (known after apply)
      [32m+[0m[0m max_number_of_record_sets                             = (known after apply)
      [32m+[0m[0m max_number_of_virtual_network_links                   = (known after apply)
      [32m+[0m[0m max_number_of_virtual_network_links_with_registration = (known after apply)
      [32m+[0m[0m name                                                  = "privatelink.redis.cache.windows.net"
      [32m+[0m[0m number_of_record_sets                                 = (known after apply)
      [32m+[0m[0m resource_group_name                                   = "castiel-dev-rg"
      [32m+[0m[0m tags                                                  = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }

      [32m+[0m[0m soa_record (known after apply)
    }

[1m  # azurerm_private_dns_zone.service_bus[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_dns_zone" "service_bus" {
      [32m+[0m[0m id                                                    = (known after apply)
      [32m+[0m[0m max_number_of_record_sets                             = (known after apply)
      [32m+[0m[0m max_number_of_virtual_network_links                   = (known after apply)
      [32m+[0m[0m max_number_of_virtual_network_links_with_registration = (known after apply)
      [32m+[0m[0m name                                                  = "privatelink.servicebus.windows.net"
      [32m+[0m[0m number_of_record_sets                                 = (known after apply)
      [32m+[0m[0m resource_group_name                                   = "castiel-dev-rg"
      [32m+[0m[0m tags                                                  = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }

      [32m+[0m[0m soa_record (known after apply)
    }

[1m  # azurerm_private_dns_zone_virtual_network_link.cosmos[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_dns_zone_virtual_network_link" "cosmos" {
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m name                  = "castiel-cosmos-dns-link-dev"
      [32m+[0m[0m private_dns_zone_name = "privatelink.documents.azure.com"
      [32m+[0m[0m registration_enabled  = false
      [32m+[0m[0m resource_group_name   = "castiel-dev-rg"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m virtual_network_id    = (known after apply)
    }

[1m  # azurerm_private_dns_zone_virtual_network_link.key_vault[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_dns_zone_virtual_network_link" "key_vault" {
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m name                  = "castiel-kv-dns-link-dev"
      [32m+[0m[0m private_dns_zone_name = "privatelink.vaultcore.azure.net"
      [32m+[0m[0m registration_enabled  = false
      [32m+[0m[0m resource_group_name   = "castiel-dev-rg"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m virtual_network_id    = (known after apply)
    }

[1m  # azurerm_private_dns_zone_virtual_network_link.redis[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_dns_zone_virtual_network_link" "redis" {
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m name                  = "castiel-redis-dns-link-dev"
      [32m+[0m[0m private_dns_zone_name = "privatelink.redis.cache.windows.net"
      [32m+[0m[0m registration_enabled  = false
      [32m+[0m[0m resource_group_name   = "castiel-dev-rg"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m virtual_network_id    = (known after apply)
    }

[1m  # azurerm_private_dns_zone_virtual_network_link.service_bus[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_dns_zone_virtual_network_link" "service_bus" {
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m name                  = "castiel-sb-dns-link-dev"
      [32m+[0m[0m private_dns_zone_name = "privatelink.servicebus.windows.net"
      [32m+[0m[0m registration_enabled  = false
      [32m+[0m[0m resource_group_name   = "castiel-dev-rg"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m virtual_network_id    = (known after apply)
    }

[1m  # azurerm_private_endpoint.cosmos[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_endpoint" "cosmos" {
      [32m+[0m[0m custom_dns_configs       = (known after apply)
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m location                 = "eastus"
      [32m+[0m[0m name                     = "castiel-pe-cosmos-dev"
      [32m+[0m[0m network_interface        = (known after apply)
      [32m+[0m[0m private_dns_zone_configs = (known after apply)
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m subnet_id                = (known after apply)
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }

      [32m+[0m[0m private_dns_zone_group {
          [32m+[0m[0m id                   = (known after apply)
          [32m+[0m[0m name                 = "castiel-cosmos-dns-zone-group"
          [32m+[0m[0m private_dns_zone_ids = (known after apply)
        }

      [32m+[0m[0m private_service_connection {
          [32m+[0m[0m is_manual_connection           = false
          [32m+[0m[0m name                           = "castiel-psc-cosmos-dev"
          [32m+[0m[0m private_connection_resource_id = (known after apply)
          [32m+[0m[0m private_ip_address             = (known after apply)
          [32m+[0m[0m subresource_names              = [
              [32m+[0m[0m "Sql",
            ]
        }
    }

[1m  # azurerm_private_endpoint.key_vault[0m will be created
[0m  [32m+[0m[0m resource "azurerm_private_endpoint" "key_vault" {
      [32m+[0m[0m custom_dns_configs       = (known after apply)
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m location                 = "eastus"
      [32m+[0m[0m name                     = "castiel-pe-keyvault-dev"
      [32m+[0m[0m network_interface        = (known after apply)
      [32m+[0m[0m private_dns_zone_configs = (known after apply)
      [32m+[0m[0m resource_group_name      = "castiel-dev-rg"
      [32m+[0m[0m subnet_id                = (known after apply)
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }

      [32m+[0m[0m private_dns_zone_group {
          [32m+[0m[0m id                   = (known after apply)
          [32m+[0m[0m name                 = "castiel-kv-dns-zone-group"
          [32m+[0m[0m private_dns_zone_ids = (known after apply)
        }

      [32m+[0m[0m private_service_connection {
          [32m+[0m[0m is_manual_connection           = false
          [32m+[0m[0m name                           = "castiel-psc-keyvault-dev"
          [32m+[0m[0m private_connection_resource_id = (known after apply)
          [32m+[0m[0m private_ip_address             = (known after apply)
          [32m+[0m[0m subresource_names              = [
              [32m+[0m[0m "vault",
            ]
        }
    }

[1m  # azurerm_redis_cache.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_redis_cache" "main" {
      [32m+[0m[0m capacity                      = 0
      [32m+[0m[0m enable_non_ssl_port           = false
      [32m+[0m[0m family                        = "C"
      [32m+[0m[0m hostname                      = (known after apply)
      [32m+[0m[0m id                            = (known after apply)
      [32m+[0m[0m location                      = "eastus"
      [32m+[0m[0m minimum_tls_version           = "1.2"
      [32m+[0m[0m name                          = (known after apply)
      [32m+[0m[0m non_ssl_port_enabled          = (known after apply)
      [32m+[0m[0m port                          = (known after apply)
      [32m+[0m[0m primary_access_key            = (sensitive value)
      [32m+[0m[0m primary_connection_string     = (sensitive value)
      [32m+[0m[0m private_static_ip_address     = (known after apply)
      [32m+[0m[0m public_network_access_enabled = true
      [32m+[0m[0m redis_version                 = (known after apply)
      [32m+[0m[0m replicas_per_master           = (known after apply)
      [32m+[0m[0m replicas_per_primary          = (known after apply)
      [32m+[0m[0m resource_group_name           = "castiel-dev-rg"
      [32m+[0m[0m secondary_access_key          = (sensitive value)
      [32m+[0m[0m secondary_connection_string   = (sensitive value)
      [32m+[0m[0m sku_name                      = "Basic"
      [32m+[0m[0m ssl_port                      = (known after apply)
      [32m+[0m[0m tags                          = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }

      [32m+[0m[0m redis_configuration {
          [32m+[0m[0m authentication_enabled                 = (known after apply)
          [32m+[0m[0m data_persistence_authentication_method = "SAS"
          [32m+[0m[0m enable_authentication                  = true
          [32m+[0m[0m maxclients                             = (known after apply)
          [32m+[0m[0m maxfragmentationmemory_reserved        = 50
          [32m+[0m[0m maxmemory_delta                        = (known after apply)
          [32m+[0m[0m maxmemory_policy                       = "allkeys-lru"
          [32m+[0m[0m maxmemory_reserved                     = 50
          [32m+[0m[0m notify_keyspace_events                 = "Ex"
        }
    }

[1m  # azurerm_resource_group.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_resource_group" "main" {
      [32m+[0m[0m id       = (known after apply)
      [32m+[0m[0m location = "eastus"
      [32m+[0m[0m name     = "castiel-dev-rg"
      [32m+[0m[0m tags     = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
    }

[1m  # azurerm_role_assignment.functions_servicebus[0m will be created
[0m  [32m+[0m[0m resource "azurerm_role_assignment" "functions_servicebus" {
      [32m+[0m[0m id                               = (known after apply)
      [32m+[0m[0m name                             = (known after apply)
      [32m+[0m[0m principal_id                     = (known after apply)
      [32m+[0m[0m principal_type                   = (known after apply)
      [32m+[0m[0m role_definition_id               = (known after apply)
      [32m+[0m[0m role_definition_name             = "Azure Service Bus Data Receiver"
      [32m+[0m[0m scope                            = (known after apply)
      [32m+[0m[0m skip_service_principal_aad_check = (known after apply)
    }

[1m  # azurerm_service_plan.functions[0m will be created
[0m  [32m+[0m[0m resource "azurerm_service_plan" "functions" {
      [32m+[0m[0m id                           = (known after apply)
      [32m+[0m[0m kind                         = (known after apply)
      [32m+[0m[0m location                     = "eastus"
      [32m+[0m[0m maximum_elastic_worker_count = (known after apply)
      [32m+[0m[0m name                         = "castiel-functions-dev-asp"
      [32m+[0m[0m os_type                      = "Linux"
      [32m+[0m[0m per_site_scaling_enabled     = false
      [32m+[0m[0m reserved                     = (known after apply)
      [32m+[0m[0m resource_group_name          = "castiel-dev-rg"
      [32m+[0m[0m sku_name                     = "Y1"
      [32m+[0m[0m tags                         = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m worker_count                 = (known after apply)
    }

[1m  # azurerm_service_plan.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_service_plan" "main" {
      [32m+[0m[0m id                           = (known after apply)
      [32m+[0m[0m kind                         = (known after apply)
      [32m+[0m[0m location                     = "eastus"
      [32m+[0m[0m maximum_elastic_worker_count = (known after apply)
      [32m+[0m[0m name                         = "castiel-dev-asp"
      [32m+[0m[0m os_type                      = "Linux"
      [32m+[0m[0m per_site_scaling_enabled     = false
      [32m+[0m[0m reserved                     = (known after apply)
      [32m+[0m[0m resource_group_name          = "castiel-dev-rg"
      [32m+[0m[0m sku_name                     = "B1"
      [32m+[0m[0m tags                         = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m worker_count                 = (known after apply)
    }

[1m  # azurerm_servicebus_namespace.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_namespace" "main" {
      [32m+[0m[0m capacity                            = 0
      [32m+[0m[0m default_primary_connection_string   = (sensitive value)
      [32m+[0m[0m default_primary_key                 = (sensitive value)
      [32m+[0m[0m default_secondary_connection_string = (sensitive value)
      [32m+[0m[0m default_secondary_key               = (sensitive value)
      [32m+[0m[0m endpoint                            = (known after apply)
      [32m+[0m[0m id                                  = (known after apply)
      [32m+[0m[0m local_auth_enabled                  = true
      [32m+[0m[0m location                            = "eastus"
      [32m+[0m[0m minimum_tls_version                 = (known after apply)
      [32m+[0m[0m name                                = "castiel-sb-dev"
      [32m+[0m[0m premium_messaging_partitions        = 0
      [32m+[0m[0m public_network_access_enabled       = true
      [32m+[0m[0m resource_group_name                 = "castiel-dev-rg"
      [32m+[0m[0m sku                                 = "Standard"
      [32m+[0m[0m tags                                = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
      [32m+[0m[0m zone_redundant                      = (known after apply)

      [32m+[0m[0m network_rule_set (known after apply)
    }

[1m  # azurerm_servicebus_namespace_authorization_rule.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_namespace_authorization_rule" "main" {
      [32m+[0m[0m id                                = (known after apply)
      [32m+[0m[0m listen                            = true
      [32m+[0m[0m manage                            = true
      [32m+[0m[0m name                              = "RootManageSharedAccessKey"
      [32m+[0m[0m namespace_id                      = (known after apply)
      [32m+[0m[0m primary_connection_string         = (sensitive value)
      [32m+[0m[0m primary_connection_string_alias   = (sensitive value)
      [32m+[0m[0m primary_key                       = (sensitive value)
      [32m+[0m[0m secondary_connection_string       = (sensitive value)
      [32m+[0m[0m secondary_connection_string_alias = (sensitive value)
      [32m+[0m[0m secondary_key                     = (sensitive value)
      [32m+[0m[0m send                              = true
    }

[1m  # azurerm_servicebus_queue.content_generation_jobs[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "content_generation_jobs" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "content-generation-jobs"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.document_chunk_jobs[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "document_chunk_jobs" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "document-chunk-jobs"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.embedding_jobs[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "embedding_jobs" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "embedding-jobs"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.enrichment_jobs[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "enrichment_jobs" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "enrichment-jobs"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.ingestion_events[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "ingestion_events" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "ingestion-events"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.risk_evaluations[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "risk_evaluations" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "risk-evaluations"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.shard_created[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "shard_created" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "shard-created"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.shard_emission[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "shard_emission" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "shard-emission"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.sync_inbound_scheduled[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "sync_inbound_scheduled" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "sync-inbound-scheduled"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.sync_inbound_webhook[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "sync_inbound_webhook" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "sync-inbound-webhook"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = false
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_servicebus_queue.sync_outbound[0m will be created
[0m  [32m+[0m[0m resource "azurerm_servicebus_queue" "sync_outbound" {
      [32m+[0m[0m auto_delete_on_idle                     = (known after apply)
      [32m+[0m[0m batched_operations_enabled              = (known after apply)
      [32m+[0m[0m dead_lettering_on_message_expiration    = true
      [32m+[0m[0m default_message_ttl                     = (known after apply)
      [32m+[0m[0m duplicate_detection_history_time_window = (known after apply)
      [32m+[0m[0m enable_batched_operations               = true
      [32m+[0m[0m enable_express                          = false
      [32m+[0m[0m enable_partitioning                     = false
      [32m+[0m[0m express_enabled                         = (known after apply)
      [32m+[0m[0m id                                      = (known after apply)
      [32m+[0m[0m lock_duration                           = "PT5M"
      [32m+[0m[0m max_delivery_count                      = 10
      [32m+[0m[0m max_message_size_in_kilobytes           = (known after apply)
      [32m+[0m[0m max_size_in_megabytes                   = (known after apply)
      [32m+[0m[0m name                                    = "sync-outbound"
      [32m+[0m[0m namespace_id                            = (known after apply)
      [32m+[0m[0m partitioning_enabled                    = (known after apply)
      [32m+[0m[0m requires_duplicate_detection            = false
      [32m+[0m[0m requires_session                        = true
      [32m+[0m[0m status                                  = "Active"
    }

[1m  # azurerm_storage_account.functions[0m will be created
[0m  [32m+[0m[0m resource "azurerm_storage_account" "functions" {
      [32m+[0m[0m access_tier                        = (known after apply)
      [32m+[0m[0m account_kind                       = "StorageV2"
      [32m+[0m[0m account_replication_type           = "LRS"
      [32m+[0m[0m account_tier                       = "Standard"
      [32m+[0m[0m allow_nested_items_to_be_public    = true
      [32m+[0m[0m cross_tenant_replication_enabled   = true
      [32m+[0m[0m default_to_oauth_authentication    = false
      [32m+[0m[0m dns_endpoint_type                  = "Standard"
      [32m+[0m[0m enable_https_traffic_only          = (known after apply)
      [32m+[0m[0m https_traffic_only_enabled         = (known after apply)
      [32m+[0m[0m id                                 = (known after apply)
      [32m+[0m[0m infrastructure_encryption_enabled  = false
      [32m+[0m[0m is_hns_enabled                     = false
      [32m+[0m[0m large_file_share_enabled           = (known after apply)
      [32m+[0m[0m local_user_enabled                 = true
      [32m+[0m[0m location                           = "eastus"
      [32m+[0m[0m min_tls_version                    = "TLS1_2"
      [32m+[0m[0m name                               = (known after apply)
      [32m+[0m[0m nfsv3_enabled                      = false
      [32m+[0m[0m primary_access_key                 = (sensitive value)
      [32m+[0m[0m primary_blob_connection_string     = (sensitive value)
      [32m+[0m[0m primary_blob_endpoint              = (known after apply)
      [32m+[0m[0m primary_blob_host                  = (known after apply)
      [32m+[0m[0m primary_blob_internet_endpoint     = (known after apply)
      [32m+[0m[0m primary_blob_internet_host         = (known after apply)
      [32m+[0m[0m primary_blob_microsoft_endpoint    = (known after apply)
      [32m+[0m[0m primary_blob_microsoft_host        = (known after apply)
      [32m+[0m[0m primary_connection_string          = (sensitive value)
      [32m+[0m[0m primary_dfs_endpoint               = (known after apply)
      [32m+[0m[0m primary_dfs_host                   = (known after apply)
      [32m+[0m[0m primary_dfs_internet_endpoint      = (known after apply)
      [32m+[0m[0m primary_dfs_internet_host          = (known after apply)
      [32m+[0m[0m primary_dfs_microsoft_endpoint     = (known after apply)
      [32m+[0m[0m primary_dfs_microsoft_host         = (known after apply)
      [32m+[0m[0m primary_file_endpoint              = (known after apply)
      [32m+[0m[0m primary_file_host                  = (known after apply)
      [32m+[0m[0m primary_file_internet_endpoint     = (known after apply)
      [32m+[0m[0m primary_file_internet_host         = (known after apply)
      [32m+[0m[0m primary_file_microsoft_endpoint    = (known after apply)
      [32m+[0m[0m primary_file_microsoft_host        = (known after apply)
      [32m+[0m[0m primary_location                   = (known after apply)
      [32m+[0m[0m primary_queue_endpoint             = (known after apply)
      [32m+[0m[0m primary_queue_host                 = (known after apply)
      [32m+[0m[0m primary_queue_microsoft_endpoint   = (known after apply)
      [32m+[0m[0m primary_queue_microsoft_host       = (known after apply)
      [32m+[0m[0m primary_table_endpoint             = (known after apply)
      [32m+[0m[0m primary_table_host                 = (known after apply)
      [32m+[0m[0m primary_table_microsoft_endpoint   = (known after apply)
      [32m+[0m[0m primary_table_microsoft_host       = (known after apply)
      [32m+[0m[0m primary_web_endpoint               = (known after apply)
      [32m+[0m[0m primary_web_host                   = (known after apply)
      [32m+[0m[0m primary_web_internet_endpoint      = (known after apply)
      [32m+[0m[0m primary_web_internet_host          = (known after apply)
      [32m+[0m[0m primary_web_microsoft_endpoint     = (known after apply)
      [32m+[0m[0m primary_web_microsoft_host         = (known after apply)
      [32m+[0m[0m public_network_access_enabled      = true
      [32m+[0m[0m queue_encryption_key_type          = "Service"
      [32m+[0m[0m resource_group_name                = "castiel-dev-rg"
      [32m+[0m[0m secondary_access_key               = (sensitive value)
      [32m+[0m[0m secondary_blob_connection_string   = (sensitive value)
      [32m+[0m[0m secondary_blob_endpoint            = (known after apply)
      [32m+[0m[0m secondary_blob_host                = (known after apply)
      [32m+[0m[0m secondary_blob_internet_endpoint   = (known after apply)
      [32m+[0m[0m secondary_blob_internet_host       = (known after apply)
      [32m+[0m[0m secondary_blob_microsoft_endpoint  = (known after apply)
      [32m+[0m[0m secondary_blob_microsoft_host      = (known after apply)
      [32m+[0m[0m secondary_connection_string        = (sensitive value)
      [32m+[0m[0m secondary_dfs_endpoint             = (known after apply)
      [32m+[0m[0m secondary_dfs_host                 = (known after apply)
      [32m+[0m[0m secondary_dfs_internet_endpoint    = (known after apply)
      [32m+[0m[0m secondary_dfs_internet_host        = (known after apply)
      [32m+[0m[0m secondary_dfs_microsoft_endpoint   = (known after apply)
      [32m+[0m[0m secondary_dfs_microsoft_host       = (known after apply)
      [32m+[0m[0m secondary_file_endpoint            = (known after apply)
      [32m+[0m[0m secondary_file_host                = (known after apply)
      [32m+[0m[0m secondary_file_internet_endpoint   = (known after apply)
      [32m+[0m[0m secondary_file_internet_host       = (known after apply)
      [32m+[0m[0m secondary_file_microsoft_endpoint  = (known after apply)
      [32m+[0m[0m secondary_file_microsoft_host      = (known after apply)
      [32m+[0m[0m secondary_location                 = (known after apply)
      [32m+[0m[0m secondary_queue_endpoint           = (known after apply)
      [32m+[0m[0m secondary_queue_host               = (known after apply)
      [32m+[0m[0m secondary_queue_microsoft_endpoint = (known after apply)
      [32m+[0m[0m secondary_queue_microsoft_host     = (known after apply)
      [32m+[0m[0m secondary_table_endpoint           = (known after apply)
      [32m+[0m[0m secondary_table_host               = (known after apply)
      [32m+[0m[0m secondary_table_microsoft_endpoint = (known after apply)
      [32m+[0m[0m secondary_table_microsoft_host     = (known after apply)
      [32m+[0m[0m secondary_web_endpoint             = (known after apply)
      [32m+[0m[0m secondary_web_host                 = (known after apply)
      [32m+[0m[0m secondary_web_internet_endpoint    = (known after apply)
      [32m+[0m[0m secondary_web_internet_host        = (known after apply)
      [32m+[0m[0m secondary_web_microsoft_endpoint   = (known after apply)
      [32m+[0m[0m secondary_web_microsoft_host       = (known after apply)
      [32m+[0m[0m sftp_enabled                       = false
      [32m+[0m[0m shared_access_key_enabled          = true
      [32m+[0m[0m table_encryption_key_type          = "Service"
      [32m+[0m[0m tags                               = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }

      [32m+[0m[0m blob_properties (known after apply)

      [32m+[0m[0m network_rules (known after apply)

      [32m+[0m[0m queue_properties (known after apply)

      [32m+[0m[0m routing (known after apply)

      [32m+[0m[0m share_properties (known after apply)

      [32m+[0m[0m static_website (known after apply)
    }

[1m  # azurerm_storage_container.functions[0m will be created
[0m  [32m+[0m[0m resource "azurerm_storage_container" "functions" {
      [32m+[0m[0m container_access_type             = "private"
      [32m+[0m[0m default_encryption_scope          = (known after apply)
      [32m+[0m[0m encryption_scope_override_enabled = true
      [32m+[0m[0m has_immutability_policy           = (known after apply)
      [32m+[0m[0m has_legal_hold                    = (known after apply)
      [32m+[0m[0m id                                = (known after apply)
      [32m+[0m[0m metadata                          = (known after apply)
      [32m+[0m[0m name                              = "function-releases"
      [32m+[0m[0m resource_manager_id               = (known after apply)
      [32m+[0m[0m storage_account_name              = (known after apply)
    }

[1m  # azurerm_subnet.app_services[0m will be created
[0m  [32m+[0m[0m resource "azurerm_subnet" "app_services" {
      [32m+[0m[0m address_prefixes                               = [
          [32m+[0m[0m "10.0.1.0/24",
        ]
      [32m+[0m[0m default_outbound_access_enabled                = true
      [32m+[0m[0m enforce_private_link_endpoint_network_policies = (known after apply)
      [32m+[0m[0m enforce_private_link_service_network_policies  = (known after apply)
      [32m+[0m[0m id                                             = (known after apply)
      [32m+[0m[0m name                                           = "app-services-subnet"
      [32m+[0m[0m private_endpoint_network_policies              = (known after apply)
      [32m+[0m[0m private_endpoint_network_policies_enabled      = (known after apply)
      [32m+[0m[0m private_link_service_network_policies_enabled  = (known after apply)
      [32m+[0m[0m resource_group_name                            = "castiel-dev-rg"
      [32m+[0m[0m virtual_network_name                           = "castiel-vnet-dev"

      [32m+[0m[0m delegation {
          [32m+[0m[0m name = "app-service-delegation"

          [32m+[0m[0m service_delegation {
              [32m+[0m[0m actions = [
                  [32m+[0m[0m "Microsoft.Network/virtualNetworks/subnets/action",
                ]
              [32m+[0m[0m name    = "Microsoft.Web/serverFarms"
            }
        }
    }

[1m  # azurerm_subnet.private_endpoints[0m will be created
[0m  [32m+[0m[0m resource "azurerm_subnet" "private_endpoints" {
      [32m+[0m[0m address_prefixes                               = [
          [32m+[0m[0m "10.0.3.0/24",
        ]
      [32m+[0m[0m default_outbound_access_enabled                = true
      [32m+[0m[0m enforce_private_link_endpoint_network_policies = (known after apply)
      [32m+[0m[0m enforce_private_link_service_network_policies  = (known after apply)
      [32m+[0m[0m id                                             = (known after apply)
      [32m+[0m[0m name                                           = "private-endpoints-subnet"
      [32m+[0m[0m private_endpoint_network_policies              = "Disabled"
      [32m+[0m[0m private_endpoint_network_policies_enabled      = (known after apply)
      [32m+[0m[0m private_link_service_network_policies_enabled  = (known after apply)
      [32m+[0m[0m resource_group_name                            = "castiel-dev-rg"
      [32m+[0m[0m virtual_network_name                           = "castiel-vnet-dev"
    }

[1m  # azurerm_subnet.redis[0m will be created
[0m  [32m+[0m[0m resource "azurerm_subnet" "redis" {
      [32m+[0m[0m address_prefixes                               = [
          [32m+[0m[0m "10.0.2.0/24",
        ]
      [32m+[0m[0m default_outbound_access_enabled                = true
      [32m+[0m[0m enforce_private_link_endpoint_network_policies = (known after apply)
      [32m+[0m[0m enforce_private_link_service_network_policies  = (known after apply)
      [32m+[0m[0m id                                             = (known after apply)
      [32m+[0m[0m name                                           = "redis-subnet"
      [32m+[0m[0m private_endpoint_network_policies              = (known after apply)
      [32m+[0m[0m private_endpoint_network_policies_enabled      = (known after apply)
      [32m+[0m[0m private_link_service_network_policies_enabled  = (known after apply)
      [32m+[0m[0m resource_group_name                            = "castiel-dev-rg"
      [32m+[0m[0m virtual_network_name                           = "castiel-vnet-dev"
    }

[1m  # azurerm_subnet_network_security_group_association.app_services[0m will be created
[0m  [32m+[0m[0m resource "azurerm_subnet_network_security_group_association" "app_services" {
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m network_security_group_id = (known after apply)
      [32m+[0m[0m subnet_id                 = (known after apply)
    }

[1m  # azurerm_subnet_network_security_group_association.private_endpoints[0m will be created
[0m  [32m+[0m[0m resource "azurerm_subnet_network_security_group_association" "private_endpoints" {
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m network_security_group_id = (known after apply)
      [32m+[0m[0m subnet_id                 = (known after apply)
    }

[1m  # azurerm_subnet_network_security_group_association.redis[0m will be created
[0m  [32m+[0m[0m resource "azurerm_subnet_network_security_group_association" "redis" {
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m network_security_group_id = (known after apply)
      [32m+[0m[0m subnet_id                 = (known after apply)
    }

[1m  # azurerm_virtual_network.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_virtual_network" "main" {
      [32m+[0m[0m address_space       = [
          [32m+[0m[0m "10.0.0.0/16",
        ]
      [32m+[0m[0m dns_servers         = (known after apply)
      [32m+[0m[0m guid                = (known after apply)
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m location            = "eastus"
      [32m+[0m[0m name                = "castiel-vnet-dev"
      [32m+[0m[0m resource_group_name = "castiel-dev-rg"
      [32m+[0m[0m subnet              = (known after apply)
      [32m+[0m[0m tags                = {
          [32m+[0m[0m "CostCenter"  = "Engineering"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Project"     = "Castiel"
        }
    }

[1m  # random_password.jwt_secret[0m will be created
[0m  [32m+[0m[0m resource "random_password" "jwt_secret" {
      [32m+[0m[0m bcrypt_hash = (sensitive value)
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m length      = 64
      [32m+[0m[0m lower       = true
      [32m+[0m[0m min_lower   = 0
      [32m+[0m[0m min_numeric = 0
      [32m+[0m[0m min_special = 0
      [32m+[0m[0m min_upper   = 0
      [32m+[0m[0m number      = true
      [32m+[0m[0m numeric     = true
      [32m+[0m[0m result      = (sensitive value)
      [32m+[0m[0m special     = true
      [32m+[0m[0m upper       = true
    }

[1m  # random_string.suffix[0m will be created
[0m  [32m+[0m[0m resource "random_string" "suffix" {
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m length      = 6
      [32m+[0m[0m lower       = true
      [32m+[0m[0m min_lower   = 0
      [32m+[0m[0m min_numeric = 0
      [32m+[0m[0m min_special = 0
      [32m+[0m[0m min_upper   = 0
      [32m+[0m[0m number      = true
      [32m+[0m[0m numeric     = true
      [32m+[0m[0m result      = (known after apply)
      [32m+[0m[0m special     = false
      [32m+[0m[0m upper       = false
    }

[1mPlan:[0m [0m83 to add, 0 to change, 0 to destroy.

Changes to Outputs:
  [32m+[0m[0m app_insights_connection_string   = (sensitive value)
  [32m+[0m[0m app_insights_instrumentation_key = (sensitive value)
  [32m+[0m[0m cosmos_db_endpoint               = (known after apply)
  [32m+[0m[0m cosmos_db_primary_key            = (sensitive value)
  [32m+[0m[0m deployment_instructions          = (known after apply)
  [32m+[0m[0m functions_app_name               = "castiel-functions-dev"
  [32m+[0m[0m functions_app_url                = (known after apply)
  [32m+[0m[0m key_vault_uri                    = (known after apply)
  [32m+[0m[0m main_api_principal_id            = (known after apply)
  [32m+[0m[0m main_api_staging_url             = "N/A"
  [32m+[0m[0m main_api_url                     = (known after apply)
  [32m+[0m[0m redis_hostname                   = (known after apply)
  [32m+[0m[0m redis_primary_access_key         = (sensitive value)
  [32m+[0m[0m resource_group_name              = "castiel-dev-rg"
  [32m+[0m[0m service_bus_connection_string    = (sensitive value)
  [32m+[0m[0m service_bus_namespace            = "castiel-sb-dev"
[33m╷[0m[0m
[33m│[0m [0m[1m[33mWarning: [0m[0m[1mArgument is deprecated[0m
[33m│[0m [0m
[33m│[0m [0m[0m  with azurerm_redis_cache.main,
[33m│[0m [0m  on redis.tf line 10, in resource "azurerm_redis_cache" "main":
[33m│[0m [0m  10:   enable_non_ssl_port = [4mfalse[0m[0m
[33m│[0m [0m
[33m│[0m [0m`enable_non_ssl_port` will be removed in favour of the property
[33m│[0m [0m`non_ssl_port_enabled` in version 4.0 of the AzureRM Provider.
[33m│[0m [0m
[33m│[0m [0m(and 11 more similar warnings elsewhere)
[33m╵[0m[0m
[90m
─────────────────────────────────────────────────────────────────────────────[0m

Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.
