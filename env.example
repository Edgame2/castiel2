# ============================================
# Coder IDE - Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# cp env.example .env

# ============================================
# General Configuration
# ============================================
NODE_ENV=development
HOST=0.0.0.0
BASE_URL=http://localhost:3000

# ============================================
# Cosmos DB Configuration
# ============================================
# Azure Cosmos DB NoSQL connection
COSMOS_DB_ENDPOINT=https://your-account.documents.azure.com:443/
COSMOS_DB_KEY=your-cosmos-db-key-here
COSMOS_DB_DATABASE_ID=castiel
COSMOS_DB_MAX_CONNECTIONS=50
COSMOS_DB_PER_SERVICE_LIMIT=10

# ============================================
# Redis Configuration
# ============================================
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=
REDIS_TLS=false

# ============================================
# RabbitMQ Configuration
# ============================================
RABBITMQ_URL=amqp://admin:admin@localhost:5672
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=admin
RABBITMQ_EXCHANGE=coder.events

# ============================================
# JWT Configuration
# ============================================
# JWT secret for user tokens (must be strong, random string)
JWT_SECRET=your-jwt-secret-key-here-change-in-production
JWT_EXPIRATION=7d
JWT_REFRESH_EXPIRATION=30d
JWT_ISSUER=coder
JWT_AUDIENCE=

# Service-to-service JWT secret (different from user JWT)
SERVICE_JWT_SECRET=your-service-jwt-secret-key-here
SERVICE_AUTH_TOKEN=your-service-auth-token-here

# ============================================
# Service URLs (for inter-service communication)
# ============================================
# Core Services
AUTH_URL=http://localhost:3021
USER_MANAGEMENT_URL=http://localhost:3022
SECRET_MANAGEMENT_URL=http://localhost:3003
LOGGING_URL=http://localhost:3014
NOTIFICATION_URL=http://localhost:3001
NOTIFICATION_SERVICE_URL=http://localhost:3001

# Extension Services
AI_SERVICE_URL=http://localhost:3006
EMBEDDINGS_URL=http://localhost:3005
SHARD_MANAGER_URL=http://localhost:3023
DOCUMENT_MANAGER_URL=http://localhost:3024
PIPELINE_MANAGER_URL=http://localhost:3025
INTEGRATION_MANAGER_URL=http://localhost:3026
AI_INSIGHTS_URL=http://localhost:3027
CONTENT_GENERATION_URL=http://localhost:3028
SEARCH_SERVICE_URL=http://localhost:3029
ANALYTICS_SERVICE_URL=http://localhost:3030
COLLABORATION_SERVICE_URL=http://localhost:3031
ADAPTIVE_LEARNING_URL=http://localhost:3032
ML_SERVICE_URL=http://localhost:3033
CONFIGURATION_SERVICE_URL=http://localhost:3034
CACHE_SERVICE_URL=http://localhost:3035
PROMPT_SERVICE_URL=http://localhost:3036
TEMPLATE_SERVICE_URL=http://localhost:3037

# API Gateway
API_GATEWAY_URL=http://localhost:3001

# ============================================
# OAuth Provider Configuration
# ============================================
# Google OAuth
GOOGLE_OAUTH_ENABLED=false
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=

# GitHub OAuth
GITHUB_OAUTH_ENABLED=false
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_REDIRECT_URI=

# ============================================
# SSO/SAML Configuration
# ============================================
SSO_ENABLED=false
SAML_ENABLED=false

# ============================================
# Secret Management Configuration
# ============================================
# Master key for encryption (64 hex characters)
SECRET_MASTER_KEY=your-64-character-hex-master-key-here
SECRETS_DEFAULT_BACKEND=LOCAL_ENCRYPTED

# ============================================
# Database Configuration (Legacy/PostgreSQL)
# ============================================
# Note: Most services use Cosmos DB, but some may still use PostgreSQL
DATABASE_URL=postgresql://user:password@localhost:5432/castiel

# ============================================
# Feature Flags
# ============================================
FEATURE_USER_PROFILES=true
FEATURE_ORGANIZATIONS=true
FEATURE_TEAMS=true
FEATURE_RBAC=true
FEATURE_INVITATIONS=true
FEATURE_USER_ANALYTICS=true

# ============================================
# Organization Settings
# ============================================
ORG_MAX_MEMBERS=1000
ALLOW_PUBLIC_ORGS=false
ORG_DEFAULT_ROLE=member

# ============================================
# Team Settings
# ============================================
TEAM_MAX_MEMBERS=100
MAX_TEAMS_PER_ORG=50

# ============================================
# Invitation Settings
# ============================================
INVITATION_EXPIRATION_DAYS=7
MAX_PENDING_INVITATIONS=100

# ============================================
# Session Configuration
# ============================================
MAX_SESSIONS_PER_USER=10
SESSION_TIMEOUT=86400000
SESSION_CLEANUP_INTERVAL=3600000

# ============================================
# Password Policy
# ============================================
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=false
PASSWORD_HISTORY_COUNT=5
PASSWORD_MAX_AGE_DAYS=90

# ============================================
# Security Settings
# ============================================
MAX_LOGIN_ATTEMPTS=5

# ============================================
# Cache Configuration
# ============================================
CACHE_TTL=300

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
LOGGING_ENABLED=true
LOGGING_SERVICE_URL=http://localhost:3014

# ============================================
# Service Registry Configuration
# ============================================
SERVICE_REGISTRY_URL=http://localhost:3001
SERVICE_REGISTRY_ENABLED=true

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_MAX=100
RATE_LIMIT_TIME_WINDOW=60000

# ============================================
# Frontend Configuration
# ============================================
FRONTEND_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3001
